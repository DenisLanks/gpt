program exemplo

var m matrix
var i int
var t1 int

proc main
    push_0 // funciona pq sizeof(int) e de matrix sao iguais... mas e para real ???
    pcall insere_dados
    popmv m

    pushmv m
    pcall mostra_dados

    // desaloca espaço da matriz m
    mfree m

    exit_0
endproc

proc insere_dados
    param d1 matrix
//    var t1 int

    // aloca espaço para a matriz d1
    // d1 armazena dados de 4 bytes e tem 10 elementos iniciais
    m1alloc d1, 4, 10

    // para i de 0 até 9 faça
    iset i, 0
    teste:
    ile t1, i, 9
    ifnot t1, proximo

    // d1[i] := i * 10;
    imul t1, i, 10
    m1set d1, i, t1

    // fim-para
    iinc i, 1
    jmp teste
    proximo:

//    decsp_4
    ret
endproc

proc mostra_dados
    param d2 matrix
//    var t1 int

    // imprima( "Valores armazenados:" );
    pushsv "Valores armazenados:"
    pushst
    push_1
    lcall imprima

    // para i de 0 até 9 faça
    iset i, 0
    teste2:
    ile t1, i, 9
    ifnot t1, proximo2

    // imprima( d2[i] );
    m1get t1, d2, i
    pushiv t1
    pushit
    push_1
    lcall imprima

    // fim-para
    iinc i, 1
    jmp teste2
    proximo2:

    decsp_4
    ret
endproc

endprogram

